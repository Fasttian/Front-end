(function(t){function e(e){for(var r,o,s=e[0],c=e[1],u=e[2],h=0,f=[];h<s.length;h++)o=s[h],a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("othello-game")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"othello-container"},[t.gameInstance?[n("div",{staticClass:"othello-board"},[t._l(t.mapData,function(e,r){return[t._l(e,function(e,a){return n("div",{key:"cell-"+r+"-"+a,staticClass:"othello-cell",class:t.getClassName(e),on:{click:function(e){return t.move(r,a)}}})}),n("br",{key:"breakline-"+r})]})],2),n("div",{staticClass:"othello-tooltip"},[t._v("\n      "+t._s(t.tooltip)+"\n    ")]),n("div",{staticClass:"othello-control"},[n("button",{on:{click:t.reStart,disabled:t.block}},[t._v("重新开始")]),n("button",{on:{click:t.moveBack,disabled:t.block}},[t._v("悔棋")])])]:[n("div",{staticStyle:{"font-size":"14px"}},[t._v("请选择一个角色开始...")]),n("div",{staticStyle:{"margin-top":"10px"}},[n("button",{on:{click:function(e){return t.chooseRole(1)}}},[t._v("黑棋")]),n("button",{on:{click:function(e){return t.chooseRole(2)}}},[t._v("白棋")])])]],2)},s=[],c=(n("456d"),n("ac6a"),n("d225")),u=n("b0b4"),l=n("bd86");function h(t){return JSON.parse(JSON.stringify(t))}var f=1,p=2,v=-1,d=function(){function t(e){Object(c["a"])(this,t),Object(l["a"])(this,"defaultData",[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,-1,-1,-1,-1,0,0],[0,0,-1,2,1,-1,0,0],[0,0,-1,1,2,-1,0,0],[0,0,-1,-1,-1,-1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]),Object(l["a"])(this,"derictions",{left:[0,-1],right:[0,1],up:[-1,0],down:[1,0],leftTop:[-1,-1],leftDown:[1,-1],rightTop:[-1,1],rightDown:[1,1]}),this.map=e||h(this.defaultData)}return Object(u["a"])(t,[{key:"move",value:function(t){var e=this,n=t.x,r=t.y,a=t.target;if(this.map[n][r]>0)return"当前位置不可落子";var i=!1;if(Object.keys(this.derictions).forEach(function(t){var o=e.derictions[t],s=e.findOneWay({x:n,y:r,target:a,deriction:o});if(s){var c=s.x,u=s.y;while(l(o),e.boundaryCheck(c,u))if(e.map[c][u]=a,c===n&&u===r)break;i=!0}function l(t){c-=t[0],u-=t[1]}}),!i)return"当前位置不可落子";this.markBoundary();var o=a===p?f:p,s=this.checkAvailable({target:o}),c=!1;s||(c=!this.checkAvailable({target:a}));var u={map:this.map,ifNextAvailable:s,ifEnd:c};return u}},{key:"autoMove",value:function(t){for(var e,n,r=this,a=!1,i=function(i,o){var c=function(c){return r.map[i][c]!==v?"continue":(o=Object.keys(r.derictions).some(function(u){var l=r.findOneWay({x:i,y:c,target:t,deriction:r.derictions[u]});return l?(e=i,n=c,a=!0,s=o,!0):(s=o,!1)}),o?"break":void 0)};t:for(var u=0;u<8;u++){var l=c(u);switch(l){case"continue":continue;case"break":break t}}if(o)return s=o,"break";s=o},o=0,s=!1;o<8;o++){var c=i(o,s);if("break"===c)break}return!!a&&this.move({x:e,y:n,target:t})}},{key:"setMap",value:function(t){this.map=h(t||this.defaultData)}},{key:"markBoundary",value:function(){for(var t=this,e=function(e){for(var n=function(n){if(t.map[e][n]<=0)return"continue";Object.keys(t.derictions).forEach(function(r){var a=e+t.derictions[r][0],i=n+t.derictions[r][1];t.boundaryCheck(a,i)&&0===t.map[a][i]&&(t.map[a][i]=v)})},r=0;r<8;r++)n(r)},n=0;n<8;n++)e(n)}},{key:"checkAvailable",value:function(t){for(var e=this,n=t.target,r=!1,a=function(t,a){var i=function(i){return e.map[t][i]!==v?"continue":(a=Object.keys(e.derictions).some(function(s){var c=e.findOneWay({x:t,y:i,target:n,deriction:e.derictions[s]});return c?(r=!0,o=a,!0):(o=a,!1)}),a?"break":void 0)};t:for(var s=0;s<8;s++){var c=i(s);switch(c){case"continue":continue;case"break":break t}}if(a)return o=a,"break";o=a},i=0,o=!1;i<8;i++){var s=a(i,o);if("break"===s)break}return r}},{key:"boundaryCheck",value:function(t,e){return t>=0&&t<=7&&e>=0&&e<=7}},{key:"findOneWay",value:function(t){var e=t.x,n=t.y,r=t.deriction,a=t.target;function i(t){s+=t[0],c+=t[1]}var o=!1,s=e,c=n,u=a,l=a===p?f:p;while(i(r),this.boundaryCheck(s,c))if(this.map[s][c]===l)o=!0;else{if(this.map[s][c]===u)break;if(this.map[s][c]<=0){o=!1;break}}return this.boundaryCheck(s,c)||(o=!1),!!o&&{x:s,y:c}}},{key:"countChess",value:function(){for(var t=0,e=0,n=0,r=0;r<8;r++)for(var a=0;a<8;a++)this.map[r][a]===p?e+=1:this.map[r][a]===f?t+=1:n+=1;return{countBlack:t,countWhite:e,countEmpty:n}}}]),t}(),b=function(){function t(e,n){var r=this;Object(c["a"])(this,t),this.player=e,this.currentTarget=f,this.status=1,this.block=!1,this.pattern=new d,"function"===typeof n&&(this.updateNotify=n),this.patterns=[],this.record(),e===p&&(this.block=!0,setTimeout(function(){r.doNextTurn(r.pattern.autoMove(r.currentTarget))},1e3))}return Object(u["a"])(t,[{key:"getMap",value:function(){return h(this.pattern.map)}},{key:"move",value:function(t,e){if(this.block)return"请稍等...";var n=this.pattern.move({x:t,y:e,target:this.currentTarget});return this.doNextTurn(n)}},{key:"doNextTurn",value:function(t){var e=this;if("string"===typeof t)return t;t.ifNextAvailable?(this.currentTarget=this.currentTarget===p?f:p,this.status=2):t.ifEnd?this.status=0:this.status=3,this.record(),this.currentTarget!==this.player?(this.block=!0,setTimeout(function(){e.doNextTurn(e.pattern.autoMove(e.currentTarget))},1e3)):this.block=!1,this.notify()}},{key:"getTip",value:function(){var t="",e=this.currentTarget===p?"白棋":"黑棋",n=this.currentTarget===this.player?"玩家":"AI";if(0===this.status){var r=this.countChess(),a=r.countBlack,i=r.countWhite;a===i?t="游戏结束, 平局":(t=a>i?"游戏已结束, 黑棋赢!":"游戏已结束, 白棋赢!",this.player===f&&a>i||this.player===p&&a<i?t+=" 玩家胜利!":t+=" AI胜利!")}else 1===this.status?t="".concat(n,"轮: 开局, 黑棋先手"):2===this.status?t="".concat(n,"轮: 请").concat(e,"落子"):3===this.status&&(t="".concat(n,"轮: PASS! ").concat(e,"继续落子"));return t}},{key:"reStart",value:function(){this.block||(this.currentTarget=f,this.status=1,this.pattern.setMap(),this.notify())}},{key:"record",value:function(){this.patterns.push({map:h(this.pattern.map),currentTarget:this.currentTarget,status:this.status})}},{key:"moveBack",value:function(){if(!this.block){if(this.patterns.length<3)return!1;var t;while(this.patterns.length>1)if(this.patterns.pop(),t=this.patterns[this.patterns.length-1],t.currentTarget===this.currentTarget)break;this.currentTarget=t.currentTarget,this.status=t.status,this.pattern.setMap(t.map),this.notify()}}},{key:"countChess",value:function(){return this.pattern.countChess()}},{key:"notify",value:function(){if(this.updateNotify)try{this.updateNotify(this)}catch(t){console.error(t)}}},{key:"isBlock",value:function(){return!1}}]),t}(),k={name:"OthelloGame",data:function(){return{gameInstance:null,mapData:[],tooltip:"",block:!1}},created:function(){},methods:{getClassName:function(t){var e={"-1":"boundary",1:"black",2:"white"};return e[t]||""},move:function(t,e){if(this.block)alert("当前不可操作, 请稍等...");else{var n=this.gameInstance.move(t,e);"string"!==typeof n||alert(n)}},update:function(t){this.mapData=t.getMap(),this.tooltip=t.getTip(),this.block=t.isBlock()},moveBack:function(){this.gameInstance.moveBack()},reStart:function(){this.gameInstance=null},chooseRole:function(t){this.gameInstance=new b(t,this.update),this.update(this.gameInstance)}}},y=k,m=(n("6401"),n("2877")),g=Object(m["a"])(y,o,s,!1,null,"c5c60472",null),O=g.exports,T={name:"app",components:{OthelloGame:O}},x=T,w=(n("034f"),Object(m["a"])(x,a,i,!1,null,null,null)),j=w.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(j)}}).$mount("#app")},6401:function(t,e,n){"use strict";var r=n("7976"),a=n.n(r);a.a},"64a9":function(t,e,n){},7976:function(t,e,n){}});
//# sourceMappingURL=app.e353acc3.js.map